This is part of boost::context with my changes
Alex Syrnikov <san@masterspline.net>
